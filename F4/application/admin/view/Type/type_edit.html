<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8">
        <title>
            ONEUE-后台/产品分类修改
        </title>
        <meta name="renderer" content="webkit">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="format-detection" content="telephone=no">
        <link rel="stylesheet" href="__STATIC__/admin/css/x-admin.css" media="all">
    </head>
    
    <body>
        
        <div class="x-body">
            <form action="" method="post" class="layui-form" onsubmit="return type_edit()" name="typeedit">
                <div class="layui-form-item">
                    <label for="cname" class="layui-form-label">
                        ID
                    </label>
                    <div class="layui-input-inline">
                        <input type="text"  name="id" required="" lay-verify="required"
                        autocomplete="off"  value="{$id}" readonly class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="cname" class="layui-form-label">
                        <span class="x-red">*</span>
                       
                    </label>
                     <div class="layui-input-inline">
                        父类名: {$pname}
                       <br><br>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="cname" class="layui-form-label">
                        <span class="x-red">*</span>
                      
                    </label>
                    <div class="layui-input-inline">
                         原类名: {$name}<br><br>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label for="cname" class="layui-form-label">
                        <span class="x-red">*</span>新分类名:
                        <!-- 这里分类名框name='cname' -->
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" id="cname" name="name" required="true" lay-verify="required"
                        autocomplete="off" class="layui-input">
                    </div>
                </div>
               
                
                <div class="layui-form-item">
                    <label for="L_repass" class="layui-form-label">
                    </label>
                    <button  class="layui-btn" lay-filter="save" lay-submit="">
                        保存
                    </button>
                </div>
            </form>
        </div>
        <script src="__STATIC__/admin/lib/layui/layui.js" charset="utf-8"></script>
        <script src="__STATIC__/admin/js/x-layui.js" charset="utf-8"></script>
        <script src="__STATIC__/admin/js/jquery.min.js" charset="utf-8"></script>
        <script>
            layui.use(['form','layer'], function(){
                $ = layui.jquery;
              var form = layui.form()
              ,layer = layui.layer;
            

              // //监听提交
              // form.on('submit(save)', function(data){
              //   console.log(data);
              //   //发异步，把数据提交给php
              //   layer.alert("保存成功", {icon: 6},function () {
              //       // 获得frame索引
              //       var index = parent.layer.getFrameIndex(window.name);
              //       //关闭当前frame
              //       parent.layer.close(index);
              //   });
              //   return false;
              // });
              
              
            });

            function type_edit(){
                $.ajax({
                    url:"{:url('type/type_doedit')}",
                    type:"post",
                    data:$(typeedit).serialize(),
                    dataType:"html",
                    async:true,
                    success:function(data){
                        if(data==1){
                            layer.alert('修改成功!',{icon: 6},function(){
                                var index = parent.layer.getFrameIndex(window.name);
                                parent.layer.close(index);
                                parent.location.reload();
                            });
                           
                        }else if(data==0){
                            layer.alert('修改失败!',{icon: 5});
                        }else if(data==2){
                            layer.alert('此分类已存在,请勿重复',{icon: 5});
                        }
                    },
                    error:function(){
                        layer.alert("请求失败,请重试",{icon: 5});
                    }
                });

                return false;
            }
        </script>
        <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?b393d153aeb26b46e9431fabaf0f6190";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
        </script>
    </body>

</html>